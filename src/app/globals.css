@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}

/* Comment Component Styles */
.comment-list {
  --comment-indent: 3rem;
  --avatar-size: 2.5rem; /* 40px */
  --avatar-center: calc(1.5rem + 1.25rem); /* p-6 + half avatar */
  --line-width: 2px;
  --line-color: #e5e7eb;
  --connector-radius: 16px;
  margin: 0;
  padding: 0;
  list-style: none;
}

.comment-item {
  position: relative;
}

/* Indentation for all comments */
.comment[style*="--depth"], .comment-show-more[style*="--depth"] {
  margin-left: calc(var(--depth, 0) * var(--comment-indent));
}

/* Vertical line from parent avatar - ONLY for items with children */
.comment-item.has-children > .comment::before {
  content: '';
  position: absolute;
  left: var(--avatar-center);
  top: calc(1.5rem + var(--avatar-size));
  bottom: 0;
  width: var(--line-width);
  background: var(--line-color);
  z-index: 1;
  transition: background-color 0.3s ease;
}

/* Curved connector for replies */
.comment.is-reply::after {
  content: '';
  position: absolute;
  z-index: 1;
  top: 0;
  height: calc(1.5rem + var(--avatar-size) / 2);
  left: calc(var(--avatar-center) - var(--comment-indent));
  width: calc(var(--comment-indent) - var(--avatar-center) + 1.5rem);
  border-bottom: var(--line-width) solid var(--line-color);
  border-left: var(--line-width) solid var(--line-color);
  border-bottom-left-radius: var(--connector-radius);
  transition: border-color 0.3s ease;
}

/* Vertical line for replies that are not the last in their list */
.comment-list.is-nested > .comment-item:not(:last-child)::before {
    content: '';
    position: absolute;
    left: calc(var(--avatar-center) + (var(--depth) - 1) * var(--comment-indent));
    top: 0;
    bottom: 0;
    width: var(--line-width);
    background-color: var(--line-color);
    z-index: 0;
    transition: background-color 0.3s ease;
}

/* Lines for the "Show More" button */
.comment-show-more.is-reply::after { /* Curved part */
  content: '';
  position: absolute;
  z-index: 1;
  top: 0;
  height: calc(1.5rem + var(--avatar-size) / 2);
  left: calc(var(--avatar-center) - var(--comment-indent) + 3rem); /* Adjusted for padding */
  width: calc(var(--comment-indent) - var(--avatar-center) + 1.5rem);
  border-bottom: var(--line-width) solid var(--line-color);
  border-left: var(--line-width) solid var(--line-color);
  border-bottom-left-radius: var(--connector-radius);
  transition: border-color 0.3s ease;
}

/* --- HOVER EFFECTS --- */

/* Parent hover highlights its own vertical line */
.comment-item.has-children > .comment:hover::before {
  background-color: #000000;
}

/* Parent hover highlights the vertical lines of its direct children */
.comment-item > .comment:hover ~ .comment-list > .comment-item::before {
  background-color: #000000;
}

/* Parent hover highlights the curved line of its direct children */
.comment-item > .comment:hover ~ .comment-list .comment.is-reply::after {
  border-color: #000000;
}

/* Parent hover highlights the lines for the "show more" button */
.comment-item > .comment:hover ~ .comment-list .comment-show-more.is-reply::after {
  border-color: #000000;
}
